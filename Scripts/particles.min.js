var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","drawing","particle"],function(n,t,i,r){var o=i,u=r,f=function(){function n(n){this.stage=n}return n.prototype.create=function(n){if(n==u.ParticleType.BouncingBall)return new u.BouncingBallParticle(this.stage);if(n==u.ParticleType.Firework)return new u.FireworkParticle(this.stage);throw"Invalid particle type specified";},n}(),e;t.ParticleFactory=f,e=function(n){function t(t,i){typeof i=="undefined"&&(i=u.ParticleType.BouncingBall),n.call(this,t),this.stage=t,this.particleType=i,this.numberOfParticlesToRender=10,this.particleFactory=new f(t),this.createParticles()}return __extends(t,n),t.prototype.createParticles=function(){this.particles=[];for(var n=0;n<this.numberOfParticlesToRender;++n)this.particles.push(this.particleFactory.create(this.particleType))},t.prototype.refresh=function(){this.createParticles()},t.prototype.draw=function(){for(var t=new Kinetic.Layer,n=0;n<this.particles.length;n++)this.particles[n].update(),this.particles[n].draw(t);this.stage.clear(),this.stage.add(t)},t}(o.AnimatedDrawable),t.Particles=e})