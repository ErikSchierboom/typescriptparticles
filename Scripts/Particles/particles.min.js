var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","helpers/drawing","Particles/bouncingballparticle","Particles/fireworkparticle","animation"],function(n,t,i,r,u){var s=i,h=r,c=u,f=function(){function n(){}return n.BouncingBall="Bouncing Ball",n.Firework="Firework",Object.defineProperty(n,"particleTypes",{get:function(){return[n.BouncingBall,n.Firework]},enumerable:!0,configurable:!0}),n}(),e,o;t.ParticleType=f,e=function(){function n(n){this.paper=n}return n.prototype.create=function(n){if(n==f.BouncingBall)return new h.BouncingBallParticle(this.paper);if(n==f.Firework)return new c.FireworkParticle(this.paper);throw"Invalid particle type specified";},n}(),t.ParticleFactory=e,o=function(n){function t(t,i){typeof i=="undefined"&&(i=f.BouncingBall),n.call(this,t),this.paper=t,this.particleType=i,this.numberOfParticlesToRender=10,this.particleFactory=new e(t),this.createParticles()}return __extends(t,n),t.prototype.createParticles=function(){this.Drawables=[];for(var n=0;n<this.numberOfParticlesToRender;++n)this.Drawables.push(this.particleFactory.create(this.particleType))},t.prototype.refresh=function(){this.createParticles()},t.prototype.draw=function(){this.paper.clear(),n.prototype.draw.call(this),this.update()},t.prototype.update=function(){for(var n=0;n<this.Drawables.length;++n)this.Drawables[n].update()},t.prototype.startAnimating=function(){var n=this;this.animationHandle=window.requestAnimationFrame(function(){n.startAnimating()}),this.draw()},t.prototype.stopAnimating=function(){window.cancelAnimationFrame(this.animationHandle)},t}(s.CompositeDrawable),t.ParticleSystem=o})