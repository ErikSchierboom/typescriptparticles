var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","helpers/vector","helpers/drawing","particles/particle"],function(n,t,i,r,u){var f=i,e=r,o=u,s=function(n){function t(t,i,r){typeof r=="undefined"&&(r=!0),n.call(this,t),this.paper=t,this.rocketColor="#000000",this.particles=[],this.coordinate=i==undefined?new f.Vector2d(this.paper.width/2,this.paper.height):i,this.updateBeginCoordinate(),this.isRocket=r,this.movement=new f.Vector2d((Math.random()*2-1)*40,this.paper.height-(Math.random()*2-1)*40),this.color=Raphael.hsl(Math.floor(Math.random()*360),100,50),this.particles.push(this)}return __extends(t,n),t.prototype.draw=function(){for(var t,i,n=0;n<this.particles.length;++n)t=this.particles[n],i=this.paper.path("M "+t.beginCoordinate.toRaphaelCoordinate()+" L "+t.coordinate.toRaphaelCoordinate()),i.attr("stroke",this.isRocket?this.rocketColor:t.color)},t.prototype.update=function(){this.isRocket&&this.iteration==e.framesPerSecond*2&&this.convertFromRocketToExplosion();for(var n=0;n<this.particles.length;++n)this.particles[n].update()},t.prototype.convertFromRocketToExplosion=function(){this.particles=[];for(var n=0;n<50;++n)this.particles.push(new t(this.paper,this.coordinate,!1));this.isRocket=!1},t.prototype.updateBeginCoordinate=function(){this.beginCoordinate=this.coordinate},t}(o.Particle);t.FireworkParticle=s})