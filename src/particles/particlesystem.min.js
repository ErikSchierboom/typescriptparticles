var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","helpers/drawing","particles/fountainparticle","particles/explosionparticle","animation"],function(n,t,i,r,u){var o=i,s=r,h=u,f=function(){function n(){}return n.Fountain="Fountain",n.Explosion="Explosion",Object.defineProperty(n,"particleTypes",{get:function(){return[n.Fountain,n.Explosion]},enumerable:!0,configurable:!0}),n}(),e;t.ParticleType=f,e=function(n){function t(t,i,r){typeof r=="undefined"&&(r=30),n.call(this,t),this.paper=t,this.particleType=i,this.numberOfParticles=r,this.createParticles()}return __extends(t,n),t.prototype.createParticles=function(){this.Drawables=[];for(var n=0;n<this.numberOfParticles;++n)this.Drawables.push(this.createParticle())},t.prototype.createParticle=function(){if(this.particleType==f.Fountain)return new s.FountainParticle(this.paper);if(this.particleType==f.Explosion)return new h.ExplosionParticle(this.paper);throw"Invalid particle type specified.";},t.prototype.refresh=function(){this.createParticles()},t.prototype.draw=function(){this.update(),this.paper.clear(),n.prototype.draw.call(this)},t.prototype.startAnimating=function(){var n=this;this.animationHandle=window.requestAnimationFrame(function(){n.startAnimating()}),this.draw()},t.prototype.stopAnimating=function(){window.cancelAnimationFrame(this.animationHandle)},t.prototype.update=function(){for(var i=this.Drawables,t,n=0;n<i.length;++n)t=i[n],t.update(),t.isDead()&&t.reset()},t}(o.CompositeDrawable),t.ParticleSystem=e})