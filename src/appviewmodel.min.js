define(["require","exports","particles/particlesystem","knockout","raphael"],function(n,t,i){var r=i,u=n("knockout"),f=function(){function n(){var n=this;this.paperElement="particlesCanvas",this.paperWidth=700,this.paperHeight=300,this.particleTypes=u.observableArray(r.ParticleType.particleTypes),this.selectedParticleType=u.observable(r.ParticleType.BouncingBall),this.animating=u.observable(!1),this.paper=Raphael(this.paperElement,this.paperWidth,this.paperHeight),this.particleSystem=new r.ParticleSystem(this.paper),this.selectedParticleType.subscribe(function(t){n.particleSystem.particleType=t,n.reset()}),this.toggleAnimating()}return n.prototype.toggleAnimating=function(){this.animating()?(this.particleSystem.stopAnimating(),this.animating(!1)):(this.particleSystem.startAnimating(),this.animating(!0))},n.prototype.reset=function(){this.particleSystem.refresh()},n}();t.AppViewModel=f})