define(["require","exports","particles/particlesystem","knockout","raphael"],function(n,t,i){var r=i,u=n("knockout"),f=function(){function n(){var t=this;this.particleTypes=u.observableArray(r.ParticleType.particleTypes),this.selectedParticleType=u.observable(r.ParticleType.Fountain),this.animating=u.observable(!1),this.particleSystem=new r.ParticleSystem(n.createRaphaelPaper(),this.selectedParticleType()),this.selectedParticleType.subscribe(function(n){t.particleSystem.particleType=n,t.reset()}),this.toggleAnimating()}return n.PaperElement="particlesCanvas",n.PaperWidth=700,n.PaperHeight=300,n.prototype.toggleAnimating=function(){this.animating()?(this.particleSystem.stopAnimating(),this.animating(!1)):(this.particleSystem.startAnimating(),this.animating(!0))},n.prototype.reset=function(){this.particleSystem.refresh()},n.createRaphaelPaper=function(){return Raphael(n.PaperElement,n.PaperWidth,n.PaperHeight)},n}();t.AppViewModel=f})